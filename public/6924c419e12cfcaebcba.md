---
title: ã€Œdiffã‚³ãƒãƒ³ãƒ‰ã€ã¨ã€ŒGitã®diffã€ã¯ä½•ãŒé•ã†ã®ã‹èª¿æŸ»ã—ã¦ã¿ãŸ
tags:
  - Linux
  - Git
private: false
updated_at: '2023-09-02T10:28:09+09:00'
id: 6924c419e12cfcaebcba
organization_url_name: null
slide: false
ignorePublish: false
---

ä»¥ä¸‹ã®2ã¤ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã¨ã™ã‚‹  

```A.txt
apple
banana
chocolate
```

```B.txt
apple
blueberry
chocolate
```

## A. Linuxã®diffã‚³ãƒãƒ³ãƒ‰ã§æ¯”è¼ƒ

```sh
diff A.txt B.txt
```

ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç„¡ã—ã®å ´åˆã€normalå½¢å¼ã®diffãŒå‡ºåŠ›ã•ã‚Œã‚‹

```diff
2c2
< banana
---
> blueberry
```

normalå½¢å¼ã§ã¯ã€å¤‰æ›´è¡Œã®å‰å¾Œã¯å‡ºåŠ›ã•ã‚Œãªã„

## B. Linuxã®diffã‚³ãƒãƒ³ãƒ‰ã§æ¯”è¼ƒ(Gitã®diffé¢¨ã«ãªã‚‹ã‚ˆã†ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸)

```sh
diff -u A.txt B.txt
```

unifiedå½¢å¼ã®diffãŒå‡ºåŠ›ã•ã‚Œã‚‹  
Gitã®diffã«ã‹ãªã‚Šè¿‘ã„å½¢å¼  

```diff
--- A.txt       2022-10-12 17:24:12.165288000 +0900
+++ B.txt       2022-10-12 17:26:09.695288000 +0900
@@ -1,3 +1,3 @@
 apple
-banana
+blueberry
 chocolate
```

ãŸã ã€ã“ã‚Œã ã¨å‡ºåŠ›æ–‡å­—åˆ—ã«è‰²ãŒä»˜ã‹ãªã„...  
diffã‚’è‰²ä»˜ãã§è¦‹ãŸã„å ´åˆã€  

```sh
diff -u A.txt B.txt > sabun.diff
```

ã¨ã„ã†é¢¨ã«ä¸€æ—¦ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ã€  
ãã‚Œã‚’Vimã‚„VSCodeãªã©ã®ãƒªãƒƒãƒãªã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã„ã¦ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’è¡¨ç¤ºã•ã›ã‚‹ã¨ã„ã†æ–¹æ³•ãŒã‚ã‚‹ãŒã€  
ã€Œç›´ã§è‰²ä»˜ãã§å‡ºåŠ›ã•ã›ãŸã„ï¼ã€ã¨ã„ã†ã›ã£ã‹ã¡ãªäººã«ã¯ã€å¾Œè¿°ã®æ–¹æ³•ã‚’ç´¹ä»‹ã™ã‚‹  

## C. colordiffã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨

```sh
sudo apt install colordiff
colordiff -u A.txt B.txt
```

è‰²ä»˜ãã®diffãŒå‡ºåŠ›ã•ã‚Œã¦ã€è¦‹ã‚„ã™ããªã£ãŸï¼  

```diff
--- A.txt       2022-10-12 17:24:12.165288000 +0900
+++ B.txt       2022-10-12 17:26:09.695288000 +0900
@@ -1,3 +1,3 @@
 apple
-banana
+blueberry
 chocolate
```

## D. Gitã®diff

1. ç©ºã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€`git init` ã§Gitãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆ
2. å¤‰æ›´å‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒŸãƒƒãƒˆ
3. å¤‰æ›´å¾Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ç½®ãæ›ãˆã¦ã‚³ãƒŸãƒƒãƒˆ

ã¨ã„ã†æ‰‹é †ã§diffã‚’ä½œæˆ(é¢å€’...)  
è¦‹æ…£ã‚ŒãŸå½¢å¼ã®diffãŒå‡ºåŠ›ã•ã‚Œã‚‹  

```diff
diff --git a/test.txt b/test.txt
index 684da80..6e73a9c 100644
--- a/test.txt
+++ b/test.txt
@@ -1,3 +1,3 @@
 apple
-banana
+blueberry
 chocolate
```

## ã¨ã“ã‚ã§ã€Gitã¯ã©ã†ã‚„ã£ã¦å·®åˆ†ã‚’å–å¾—ã—ã¦ã„ã‚‹ï¼Ÿ

```sh
# ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚·ãƒ¥å€¤ã‚’è¨ˆç®—
cat test.txt | git hash-object -w --stdin
```

> 6e73a9cea3235240ff29f184e0427d47b09f8801

diffã‚’è¡¨ç¤ºã—ãŸéš›ã«å‡ºåŠ›ã•ã‚ŒãŸ `index 684da80..6e73a9c` ã® `6e73a9c` ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’ãƒãƒƒã‚·ãƒ¥åŒ–ã—ãŸéš›ã®å€¤ã®å…ˆé ­7æ¡ã¨ä¸€è‡´ï¼
Gitã¯ãƒãƒƒã‚·ãƒ¥é–¢æ•°ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ãŒä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ã¨ã„ã†ã‚ã‘ãªã®ã   

ã¡ãªã¿ã«ã€ãƒãƒƒã‚·ãƒ¥å€¤ã®å…ˆé ­2æ¡ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã€æ®‹ã‚Šã®38æ¡ã¯ãƒ•ã‚¡ã‚¤ãƒ«åã¨ã—ã¦ `.git/objects` ã®ä¸‹ã«ä¿å­˜ã•ã‚Œã‚‹  
![git_object.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/675511/d0124213-4c14-d2fb-0ad4-b3449b121dbc.png)

`cat-file` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã“ã¨ã§ä¸­èº«ã‚’å–ã‚Šå‡ºã™ã“ã¨ã‚‚ã§ãã‚‹  

```sh
git cat-file -p 6e73a9cea3235240ff29f184e0427d47b09f8801
```

> apple  
> blueberry  
> chocolate  

GitãŒé«˜é€Ÿãªå‹•ä½œã‚’ã™ã‚‹èƒŒæ™¯ã«ã¯ã€ã“ã†ã„ã£ãŸå„ªã‚ŒãŸä»•çµ„ã¿ãŒã‚ã£ãŸã®ã   
ãƒªãƒ¼ãƒŠã‚¹æ§˜ã«æ„Ÿè¬ğŸ™‡â€â™‚ï¸

## å‚è€ƒã‚µã‚¤ãƒˆ

- [10.2 Gitã®å†…å´ - Gitã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ](https://git-scm.com/book/ja/v2/Git%E3%81%AE%E5%86%85%E5%81%B4-Git%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88)
- [git diff ã‚³ãƒãƒ³ãƒ‰ã¨ãµã¤ã†ã® diff / patch ã‚³ãƒãƒ³ãƒ‰](https://gotohayato.com/content/108/)
- [ã€ diff ã€‘ã‚³ãƒãƒ³ãƒ‰ï¼ˆåŸºæœ¬ç·¨ï¼‰â€•â€•ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ã‚’å‡ºåŠ›ã™ã‚‹](https://atmarkit.itmedia.co.jp/ait/articles/1704/13/news021.html)
- [git diff | Atlassian Git Tutorial](https://www.atlassian.com/ja/git/tutorials/saving-changes/git-diff)
- [Gitã‚’æ”¯ãˆã‚‹å†…éƒ¨æ§‹é€ ã«ã¤ã„ã¦ã®è©±](https://techblog.timers-inc.com/entry/2016/11/14/113154)
- [Gitã®ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥å€¤ã¯ä½•ã‚’å…ƒã«ã©ã†ã‚„ã£ã¦ç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã®ã‹](https://engineering.mercari.com/blog/entry/2016-02-08-173000/)
